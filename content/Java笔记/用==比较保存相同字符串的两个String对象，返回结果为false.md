---
title: 用==比较保存相同字符串的两个String对象，返回结果为false
author: team317
Date: 2022-03-17
categories:  
  - "Java笔记"
tags:  
  - "Java"
---

在Java中编写如下代码：
```java
String str1 = "hello";
String str2 = "hello";
System.out.println("Is str1==str2:", str1==str2);
```
输出结果为`Is str1==str2:false`，`str1`和`str2`中保存的字符串是相同的，但为什么两个对象却并不相等？这个问题并不难，但可以把一些知识点串联起来。<!--more-->

`Java`中的字符串存放在公共的存储池中，每个字符串都是不可变的的，在存储池中只保存一份，所以在上面的代码中，`str1`和`str2`保存的同一份的字符串，那么为什么`str1==str2`的结果依然为`false`呢？

首先从`==`运算符入手，`==`用来比较两个变量中保存的值是否相同，由于`Java`中不允许用户重载运算符，所以`==`的含义不会改变，在`str1==str2`中会比较`str1`和`str2`中保存的值是否相同。乍一看，`str1`和`str2`保存同一份字符串，两者的值一定是相同的。

理解这个问题的关键是**区分实例字段的值和类变量的值。**

`Java`中的变量可分为两类，一类是基本类型变量，这类变量中存放的是值；另一类是类变量，用于保存非基本类型创建的引用，可以理解为对象的位置。

`str1`和`str2`是类对象，其中保存的是`String`对象的引用。在`String`类型中，字符串保存在`value`字段中，这是一个字符数组。所以`str1`和`str2`的`value`字段会保存相同的字符串。但`str1`和`str2`对应的是两个不同的对象，两者在内存中的位置并不相同，所以`str1`和`str2`的值也就不同了。使得返回结果为`false`。

要比较两个字符串对象中保存的字符串是否相等，需使用`equals`方法，它会逐个比对字符串中的字符，当对应位置上的字符全部相同时返回`true`。